<odoo>
  <template id="report_invoice_document_inherit_firs" inherit_id="account.report_invoice_document">
    <!-- Place a small bordered FIRS box at the top right of the invoice body when IRN exists -->
    <xpath expr="//div[contains(@class, 'article')]" position="before">
      <xpath expr="//div[contains(@class, 'article')]" position="after">
        <t t-if="doc.firs_irn">
          <div style="position: absolute; right: 20px; top: 20px; width:150px; border:1px solid #777; padding:6px; text-align:center; font-size:10px;">
            <div style="font-weight:bold; margin-bottom:6px;">FIRS e-Invoice</div>
            <div style="word-wrap:break-word; font-size:9px; margin-bottom:6px;"><strong>IRN:</strong><br/><span t-esc='doc.firs_irn'/></div>
            <t t-if="doc.firs_qr">
              <img t-att-src="'data:image/png;base64,%s' % (doc.firs_qr.decode() if isinstance(doc.firs_qr, bytes) else doc.firs_qr)" style="width:110px;height:110px;"/>
            </t>
          </div>
        </t>
      </xpath>
    </xpath>
  </template>
</odoo>
